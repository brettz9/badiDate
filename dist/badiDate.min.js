/**
 * @license BadiDate v2.1.2
 * (c) 2018 Jan Greis
 * licensed under MIT
 */

/**
 * @license BadiDate v2.1.2
 * (c) 2018 Jan Greis
 * licensed under MIT
 */
!function(t,a){"object"==typeof exports&&"undefined"!=typeof module?a(exports):"function"==typeof define&&define.amd?define(["exports"],a):a((t=t||self).window=t.window||{})}(this,(function(t){"use strict";function a(t,a){for(var e=0;e<a.length;e++){var i=a[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(t){return function(t){if(Array.isArray(t)){for(var a=0,e=new Array(t.length);a<t.length;a++)e[a]=t[a];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var i="0".charCodeAt(0),r=Object.freeze({__proto__:null,month:{1:"Bahá",2:"Jalál",3:"Jamál",4:"‘Aẓamat",5:"Núr",6:"Raḥmat",7:"Kalimát",8:"Kamál",9:"Asmá’",10:"‘Izzat",11:"Ma_sh_íyyat",12:"‘Ilm",13:"Qudrat",14:"Qawl",15:"Masá’il",16:"_Sh_araf",17:"Sulṭán",18:"Mulk",19:"‘Alá’",20:"Ayyám-i-Há"},monthL:{1:"Splendour",2:"Glory",3:"Beauty",4:"Grandeur",5:"Light",6:"Mercy",7:"Words",8:"Perfection",9:"Names",10:"Might",11:"Will",12:"Knowledge",13:"Power",14:"Speech",15:"Questions",16:"Honour",17:"Sovereignty",18:"Dominion",19:"Loftiness",20:"Ayyám-i-Há"},holyDay:{1:"Naw-Rúz",2:"First day of Riḍván",3:"Ninth day of Riḍván",4:"Twelfth day of Riḍván",5:"Declaration of the Báb",6:"Ascension of Bahá’u’lláh",7:"Martyrdom of the Báb",8:"Birth of the Báb",9:"Birth of Bahá’u’lláh",10:"Day of the Covenant",11:"Ascension of ‘Abdu’l-Bahá"},weekday:{1:"Jalál",2:"Jamál",3:"Kamál",4:"Fiḍál",5:"‘Idál",6:"Istijlál",7:"Istiqlál"},weekdayAbbr3:{1:"Jal",2:"Jam",3:"Kam",4:"Fiḍ",5:"‘Idá",6:"Isj",7:"Isq"},weekdayAbbr2:{1:"Jl",2:"Jm",3:"Ka",4:"Fi",5:"‘Id",6:"Ij",7:"Iq"},weekdayL:{1:"Glory",2:"Beauty",3:"Perfection",4:"Grace",5:"Justice",6:"Majesty",7:"Independence"},yearInVahid:{1:"Alif",2:"Bá’",3:"Ab",4:"Dál",5:"Báb",6:"Váv",7:"Abad",8:"Jád",9:"Bahá",10:"Ḥubb",11:"Bahháj",12:"Javáb",13:"Aḥad",14:"Vahháb",15:"Vidád",16:"Badí‘",17:"Bahí",18:"Abhá",19:"Váḥid"},vahid:"Váḥid",kulliShay:"Kull-i-_Sh_ay’",BE:"B.E.",badiCalendar:"Badí‘ Calendar",digitUnicodeOffset:i,defaultFormat:"d MM+ y BE"}),s={};s.en=r;var l="css",c=["l4da","k4ci","k5c7","l4d6","l4ce","k4c4","k5d4","l4cb","l4c1","k4cj","k5c8","l4d7","l4cf","k4c5","k4d5","k5ce","l4c2","k4d2","k4ca","k5da","l4ch","k4c6","k4d6","k5cf","l4c4","k4d4","k4cc","k5c1","l4cj","k4c8","k4d8","k5cg","l4c5","k4d5","k4ce","k5c3","l4d2","k4ca","k4d9","k5ci","l4c6","k4d6","k4cf","k4c4","k5d4","k4cb","k4bj","k4cj","k5c9","k4d8","k4cg","k4c6","k5d6","k4cd","k4c2","k4d2","k5ca","k4d9","k4ci","k4c7","k5d7","k4cf","k4c4","k4d4","k5cc","k4bj","k4cj","k4c9","k5d9","k4cg","k4c6","k4d5","k5cd","k4c2","k4d1","k4ca","k4da","j5cj","k4c7","k4d7","k4cf","j5c4","k4d3","k4cb","k4c1","k5d1","l4c9","l4d9","l4ch","k5c6","l4d5","l4cd","l4c2","k5d2","l4ca","l4da","l4cj","k5c8","l4d7","l4cf","l4c4","k5d4","l4cb","l4c1","l4d1","k5c9","l4d8","l4cg","l4c5","k4d5","k5ce","l4c2","l4d2","k4cb","k5db","l4ci","l4c7","k4d7","k5cf","l4c4","l4d4","k4cc","k5c2","l4d1","l4c9","k4d9","k5ch","l4c5","l4d5","k4ce","k5c3","l4d2","l4cb","k4da","k5ci","l4c6","l4d6","k4cf","k5c5","l4d4","l4cc","k4c1","k4d1","k5c9","l4d8","k4cg","k4c6","k5d6","l4ce","k4c3","k4d3","k5cb","l4da","k4ci","k4c7","k5d7","l4cf","k4c5","k4d5","k5cd","l4c1","k4cj","k4c9","k5d9","l4cg","k4c6","k4d6","k5ce","l4c3","k4d2","k4ca","k5bj","l4ci","k4c7","k4d7","k4cg","k5c5","k4d4","k4cc","k4c1","k5d1","k4c9","k4d9","k4ch","k5c7","l4d6","l4ce","l4c3","l5d3","l4ca","l4da","l4cj","l5c8","l4d7","l4cg","l4c5","l5d4","l4cb","l4c1","l4d1","l5ca","l4d9","l4ch","l4c6","l5d6","l4cd","l4c2","l4d2","l4cb","k5c1","l4cj","l4c8","l4d8","k5cg","l4c4","l4d4","l4cc","k5c2","l4d1","l4ca","l4da","k5ci","l4c6","l4d5","l4ce","k5c3","l4d2","l4cb","l4db","k5cj","l4c8","l4d7","l4cf","k5c5","l4d4","l4cc","l4c2","k5d2","l4c9","l4d9","l4ch","k4c6","k5d6","l4ce","l4c3","k4d3","k5cc","l4db","l4cj","k4c8","k5d8","l4cf","l4c4","k4d5","k5cd","l4c2","l4d2","k4ca","k5d9","l4cg","l4c6","k4d6","k5cf","l4c3","l4d3","k4cb","k5bj","l4ci","l4c7","k4d7","k5cg","l4c5","l4d5","k4cd","k4c2","k5d2","l4c9","k4d9","k4ch","k5c7","l4d6","k4cf","k4c4","k5d4","l4cb","l4bj","l4cj","l5c8","m4d7","l4cg","l4c5","l5d5","m4cc","l4c1","l4d1","l5ca","m4d9","l4ch","l4c7","l5d7","m4ce","l4c3","l4d3","l5cb","m4bi","l4ci","l4c8","l4d8","l5ch","l4c5","l4d5","l4cd","l5c2","l4d1","l4c9","l4da","l5ci","l4c7","l4d7","l4cf","l5c4","l4d2","l4cb","l4bj","l5d1","l4c8","l4d8","l4cg","l5c5","l4d4","l4cc","l4c2","l5d2","l4c9","l4da","l4ci"],n=function(){function t(a){if(function(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this,t),this._gregDate=0,this._badiYear=0,this._badiMonth=0,this._badiDate=0,this._nawRuz=0,this._ayyamiHaLength=0,this._yearTB=[],this._holyDay=!1,this._valid=!0,a instanceof Date)this.gregDate=moment.utc([a.getFullYear(),a.getMonth(),a.getDate(),12]);else if(a instanceof moment)this._gregDate=moment.utc([a.year(),a.month(),a.date(),12]);else if("string"==typeof a){var e=this._parseBadiDateString(a);if(e)this._setFromBadiDate(e);else{var i=new Date(a);this._gregDate=moment.utc([i.getFullYear(),i.getMonth(),i.getDate(),12]),this._notInValidGregRange(this._gregDate)&&this._setInvalid()}}else a.constructor===Array&&(3!==a.length&&2!==a.length?this._setInvalid():this._setFromBadiDate(a));0===this._badiYear&&this._setFromGregorianDate(),this._valid&&this._setHolyDay()}var i,r,n;return i=t,(r=[{key:"format",value:function(t,a){if(!this.isValid())return"Not a valid date";var e=[["DDL","DD+","MML","MM+","WWL","yyv","KiS"],["dd","DD","mm","MM","ww","WW","yv","YV","vv","kk","yy","BE","BC","Va"],["d","D","m","M","W","v","k","y"]];void 0!==a&&void 0!==s[a]||(a=void 0===s.default?"en":"default"),"string"!=typeof t&&(t=this._formatItemFallback(a,"defaultFormat"));for(var i="",r=t.length,l=0;l<r;l++)if("{"===t[l]&&l<r-1)for(var c=l+1;c<=r;c++){if(c===r)return"Invalid formatting string.";if("}"===t[c]){l=c;break}i+=t[c]}else{var n=t[l],h=n+t[l+1],d=h+t[l+2];e[0].indexOf(d)>-1?(i+=this._getFormatItem(d,a),l+=2):e[1].indexOf(h)>-1?(i+=this._getFormatItem(h,a),l+=1):e[2].indexOf(n)>-1?i+=this._getFormatItem(n,a):i+=n}return i}},{key:"_postProcessLocaleItem",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(a&&a<t.length){for(var e=0,i=0;i<a;)-1==="_’‘".indexOf(t[e])&&i++,e++;"_’‘".indexOf(t[e])>-1&&e++,(t=t.slice(0,e)).split("_").length%2==0&&(t+="_")}for(var r=t.split("_"),s=1;s<r.length;s+=2)switch(l){case"css":r[s]='<span style="text-decoration:underline">'+r[s]+"</span>";break;case"diacritic":for(var c="",n=0;n<r[s].length;n++)c+=r[s][n]+"̲";r[s]=c;break;case"u":r[s]="<u>"+r[s]+"</u>";break;default:throw new TypeError("Unexpected underlineFormat")}return r.join("")}},{key:"_getFormatItem",value:function(t,a){switch(t){case"d":return this._digitRewrite(this._badiDay,a);case"D":return this._postProcessLocaleItem(this._formatItemFallback(a,"month",this._badiDay),3);case"m":return this._digitRewrite(this._badiMonth,a);case"M":return this._postProcessLocaleItem(this._formatItemFallback(a,"month",this._badiMonth),3);case"W":return this._formatItemFallback(a,"weekdayAbbbr3",(this._gregDate.isoWeekday()+1)%7+1);case"y":return this._digitRewrite(this._badiYear,a);case"v":return this._digitRewrite(Math.floor((this._badiYear-1)/19)%19+1,a);case"k":return this._digitRewrite(Math.floor((this._badiYear-1)/361)+1,a);case"dd":return this._digitRewrite(("0"+String(this._badiDay)).slice(-2),a);case"DD":return this._postProcessLocaleItem(this._formatItemFallback(a,"month",this._badiDay));case"mm":return this._digitRewrite(("0"+String(this._badiMonth)).slice(-2),a);case"MM":return this._postProcessLocaleItem(this._formatItemFallback(a,"month",this._badiMonth));case"ww":return this._formatItemFallback(a,"weekdayAbbr2",(this._gregDate.isoWeekday()+1)%7+1);case"WW":return this._formatItemFallback(a,"weekday",(this._gregDate.isoWeekday()+1)%7+1);case"yy":return this._digitRewrite(("00"+String(this._badiYear)).slice(-3),a);case"yv":return this._digitRewrite((this._badiYear-1)%19+1,a);case"YV":return this._formatItemFallback(a,"yearInVahid",(this._badiYear-1)%19+1);case"vv":return this._digitRewrite(("0"+String((Math.floor((this._badiYear-1)/19)+2)%19-1)).slice(-2),a);case"kk":return this._digitRewrite(("0"+String(Math.floor((this._badiYear-1)/361)+1)).slice(-2),a);case"Va":return this._formatItemFallback(a,"vahid");case"BE":return this._formatItemFallback(a,"BE");case"BC":return this._formatItemFallback(a,"badiCalendar");case"DDL":return this._formatItemFallback(a,"monthL",this._badiDay);case"DD+":var e=this._postProcessLocaleItem(this._formatItemFallback(a,"month",this._badiDay)),i=this._formatItemFallback(a,"monthL",this._badiDay);return e===i?e:s[a]===s.fa?'<span dir="rtl">'.concat(e," (").concat(i,")</span>"):"".concat(e," (").concat(i,")");case"MML":return this._formatItemFallback(a,"monthL",this._badiMonth);case"MM+":var r=this._postProcessLocaleItem(this._formatItemFallback(a,"month",this._badiMonth)),l=this._formatItemFallback(a,"monthL",this._badiMonth);return r===l?r:s[a]===s.fa?'<span dir="rtl">'.concat(r," (").concat(l,")</span>"):"".concat(r," (").concat(l,")");case"WWL":return this._formatItemFallback(a,"weekdayL",(this._gregDate.isoWeekday()+1)%7+1);case"yyv":return this._digitRewrite(("0"+String((this._badiYear-1)%19+1)).slice(-2),a);case"KiS":return this._postProcessLocaleItem(this._formatItemFallback(a,"kulliShay"));default:return""}}},{key:"_digitRewrite",value:function(t,a){t=String(t);var i=this._formatItemFallback(a,"digitUnicodeOffset")-"0".charCodeAt(0);if(0===i)return t;var r=e(t).map((function(t){return t.charCodeAt(0)+i}));return String.fromCharCode.apply(String,e(r))}},{key:"_languageFallback",value:function(t){return t.indexOf("-")>-1?t.split("-")[0]:"default"!==t?"default":"en"}},{key:"_formatItemFallback",value:function(t,a,e){if(void 0===e){for(;void 0===s[t]||void 0===s[t][a];)t=this._languageFallback(t);return s[t][a]}for(;void 0===s[t]||void 0===s[t][a]||void 0===s[t][a][e];)t=this._languageFallback(t);return s[t][a][e]}},{key:"_parseBadiDateString",value:function(t){for(var a=t.split("-"),e=0;e<a.length;e++){if(!/^\d+$/.test(a[e]))return!1;a[e]=parseInt(a[e],10)}return 3!==a.length?2===a.length&&a[1]>0&&a[1]<12&&a:!(a[1]>20||a[1]<1)&&!(a[2]>19||a[2]<1)&&a}},{key:"_notInValidGregRange",value:function(t){return t.isBefore(moment.utc("1844-03-21"))||t.isAfter(moment.utc("2351-03-20"))}},{key:"_setFromGregorianDate",value:function(){if(this._notInValidGregRange(this._gregDate))this._setInvalid();else{var t=this._gregDate.year();this._gregDate.isBefore(moment.utc("2015-03-21"))?(this._gregDate.isBefore(t+"-03-21")?(this._nawRuz=moment.utc((t-1).toString()+"-03-21"),this._badiYear=t-1844):(this._nawRuz=moment.utc(t.toString()+"-03-21"),this._badiYear=t-1843),this._setOldAyyamiHaLength(),this._yearTB=[12,5,13,9]):(this._badiYear=t-1843,this._setBadiYearInfo(!0)),this._setBadiMonthDay()}}},{key:"_setBadiMonthDay",value:function(){var t=this._dayOfYear(this._gregDate);t<343?(this._badiMonth=Math.floor((t-1)/19+1),this._badiDay=(t-1)%19+1):t<343+this._ayyamiHaLength?(this._badiMonth=20,this._badiDay=t-342):(this._badiMonth=19,this._badiDay=t-(342+this._ayyamiHaLength))}},{key:"_setFromBadiDate",value:function(t){if(this._badiYear=parseInt(t[0],10),this._badiYear<1||this._badiYear>507)this._setInvalid();else{if(this._badiYear<172?(this._nawRuz=moment.utc([1843+this._badiYear,2,21]),this._setOldAyyamiHaLength(),this._yearTB=[12,5,13,9]):this._setBadiYearInfo(),void 0!==t[2])this._badiMonth=parseInt(t[1],10),this._badiDay=parseInt(t[2],10),20===this._badiMonth&&this._badiDay>this._ayyamiHaLength&&(this._badiDay-this._ayyamiHaLength==1?(this._badiMonth=19,this._badiDay=1):this._setInvalid());else switch(parseInt(t[1],10)){case 1:this._badiMonth=1,this._badiDay=1;break;case 2:this._badiMonth=2,this._badiDay=13;break;case 3:this._badiMonth=3,this._badiDay=2;break;case 4:this._badiMonth=3,this._badiDay=5;break;case 5:this._badiMonth=4,this._badiDay=8,this._badiYear<172&&(this._badiDay=7);break;case 6:this._badiMonth=4,this._badiDay=13;break;case 7:this._badiMonth=6,this._badiDay=17,this._badiYear<172&&(this._badiDay=16);break;case 8:this._badiMonth=this._yearTB[0],this._badiDay=this._yearTB[1];break;case 9:this._badiMonth=this._yearTB[2],this._badiDay=this._yearTB[3];break;case 10:this._badiMonth=14,this._badiDay=4;break;case 11:this._badiMonth=14,this._badiDay=6;break;default:return void this._setInvalid()}var a=this._nawRuz.diff(moment.utc([this._badiYear+1843]),"days")+this._dayOfYear([this._badiYear,this._badiMonth,this._badiDay]);this._gregDate=moment.utc([this._badiYear+1843]),this._gregDate.dayOfYear(a),this._gregDate.hour(12)}}},{key:"_setOldAyyamiHaLength",value:function(){moment([this._nawRuz.year()+1]).isLeapYear()?this._ayyamiHaLength=5:this._ayyamiHaLength=4}},{key:"_setBadiYearInfo",value:function(t){var a=this._extractBadiYearInfo();!0===t&&this._gregDate.isBefore(moment.utc(a.NR))&&(this._badiYear-=1,a=this._extractBadiYearInfo()),this._nawRuz=moment.utc(a.NR),this._ayyamiHaLength=a.aHL,this._yearTB=a.TB}},{key:"_extractBadiYearInfo",value:function(){var t={};if("l4da"===c[0]){var a=c[this._badiYear-172].split("");t.NR=String(this._badiYear-172+2015)+"-03-"+String(parseInt(a[0],36)),t.aHL=parseInt(a[1],36);var e=[parseInt(a[2],36),parseInt(a[3],36)],i=e[1]<19?[e[0],e[1]+1]:[e[0]+1,1];t.TB=[e[0],e[1],i[0],i[1]]}else t=c[this._badiYear];return t}},{key:"_dayOfYear",value:function(t){var a=0;return t.constructor===Array?t[1]<19?a=19*(t[1]-1)+t[2]:20===t[1]?a=342+t[2]:19===t[1]&&(a=342+this._ayyamiHaLength+t[2]):a=t.diff(this._nawRuz,"days")+1,a}},{key:"_setInvalid",value:function(){this._gregDate=moment.utc("0000-00-00"),this._badiYear=-1,this._badiMonth=-1,this._badiDay=-1,this._ayyamiHaLength=-1,this._nawRuz=moment.utc("0000-00-00"),this._valid=!1}},{key:"_setHolyDay",value:function(){1===this._badiMonth&&1===this._badiDay?this._holyDay=1:2===this._badiMonth&&13===this._badiDay?this._holyDay=2:3===this._badiMonth&&2===this._badiDay?this._holyDay=3:3===this._badiMonth&&5===this._badiDay?this._holyDay=4:4===this._badiMonth&&13===this._badiDay?this._holyDay=6:14===this._badiMonth&&4===this._badiDay?this._holyDay=10:14===this._badiMonth&&6===this._badiDay&&(this._holyDay=11),this._badiMonth===this._yearTB[0]&&this._badiDay===this._yearTB[1]?this._holyDay=8:this._badiMonth===this._yearTB[2]&&this._badiDay===this._yearTB[3]&&(this._holyDay=9),this._badiYear<172?4===this._badiMonth&&7===this._badiDay?this._holyDay=5:6===this._badiMonth&&16===this._badiDay&&(this._holyDay=7):4===this._badiMonth&&8===this._badiDay?this._holyDay=5:6===this._badiMonth&&17===this._badiDay&&(this._holyDay=7)}},{key:"holyDay",value:function(t){return!!this._holyDay&&(void 0!==t&&void 0!==s[t]||(t=void 0===s.default?"en":"default"),this._formatItemFallback(t,"holyDay",this._holyDay))}},{key:"isValid",value:function(){return this._valid}},{key:"badiDay",value:function(){return this._badiDay}},{key:"badiMonth",value:function(){return this._badiMonth}},{key:"badiYear",value:function(){return this._badiYear}},{key:"badiWeekday",value:function(){return(this._gregDate.isoWeekday()+1)%7+1}},{key:"yearInVahid",value:function(){return(this._badiYear-1)%19+1}},{key:"vahid",value:function(){return Math.floor((this._badiYear-1)/19)%19+1}},{key:"kullIShay",value:function(){return Math.floor((this._badiYear-1)/361)+1}},{key:"gregorianDate",value:function(){return this._gregDate}},{key:"ayyamiHaLength",value:function(){return this._ayyamiHaLength}},{key:"holyDayNumber",value:function(){return this._holyDay}}])&&a(i.prototype,r),n&&a(i,n),t}();t.BadiDate=n,t.badiDateOptions=function(t){var a,e;"string"==typeof t.defaultLanguage&&(a=t.defaultLanguage,void 0===s[a]?console.log("Chosen language does not exist. Setting has not been changed."):s.default=s[a]),"string"==typeof t.underlineFormat&&(e=t.underlineFormat,["css","u","diacritic"].indexOf(e)>-1?l=e:console.log('Invalid underline format. Choose one of ["css", "u", "diacritic"]. Setting has not been changed.'))},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=badiDate.min.js.map
